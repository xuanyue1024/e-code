<div align="center">
  <img src="assets/logo.ico" alt="Ecode Logo" width="120" />
  <h1>Ecode 编程实践平台</h1>
</div>

## 第一章 APP 软件概述

### 1.1 用途

在国家推动中小学人工智能教育普及、强调AI与教育融合的政策背景下，编程教育需求激增。但传统编程教学资源存在个性化不足、题库陈旧、缺乏实践场景等问题，难以满足中小学生及编程初学者差异化学习需求，教师也需高效教学工具。本项目通过AI技术赋能编程教育，解决现有痛点，响应政策要求，具有迫切的开发必要性。

### 1.2 用户与功能定位

目标用户：以中小学生、编程初学者为核心，同时兼顾编程教育教师群体。

### 学生端功能定位：

1. 便捷登录：支持登录注册，利用WebAuthn身份认证技术，用户可通过指纹、面部识别等生物特征或USB密钥快速完成身份认证，无需输入密码，保障账号安全，实现快速、便捷登录。  
2. 我的班级：学生可进行加入、退出班级操作，查看班级信息，还能获取班级数据统计，包括班级题目、学生情况等，便于了解班级学习动态。  
3. 题目集：具备题目检索功能，方便学生查找所需题目；支持调试代码，提交不同语言代码并运行，满足编程实践需求。  
4. 成绩管理：学生可查看个人成绩，及时了解学习成果与进步情况。  
5. AI 辅助学习：通过 AI 答疑解决编程学习疑问；借助 AI 题目解答深入理解题目思路；获得 AI 个性化学习推荐，依据自身情况精准匹配学习资源，提升学习效率。

### 教师端功能定位：

1. 高效管理：提供登录注册功能；可进行班级管理，包括创建、修改班级信息，移入、移出学生等操作；能对学生进行管理，查询学生列表，掌握学生情况；实现成绩管理，了解学生学习成果。  
2. 题目管理：可新增、修改、移出题目，查询题目并获取题目解析，构建和优化教学题目资源库。  
3. AI 助力教学：利用 AI 生成题目功能，获取创新、高质量教学题目，丰富教学内容，提升教学效率。

![](assets/a6b6d87796fecd911735ecef107885a4eefb63c3a5abe9335b005b877c83b45a.jpg)  
<p align="center">图1 系统功能模块图</p>
### 1.3 系统架构

平台采用前后端分离架构。前端负责用户交互和界面展示，后端处理业务逻辑、数据管理和API服务，前后端通过RESTful API接口通信，实现完全解耦。

![](assets/af45d18a73acd1536604a5b074afbb086456ed13d46115b04c367c1c5c687dc7.jpg)  
<p align="center">图2 系统架构图</p>

### 1.4 模块层次结构

系统主要分为前端和后端两大模块，后端进一步细分为不同的服务和功能层，与数据库和文件存储进行交互。模块层次结构主要围绕用户角色（学生、教师）及其对应功能进行划分。

![](assets/cce5f77af8ce05d770d227df8a7cb0645284f39a48610c28f3b29ab062f9e25a.jpg)  
<p align="center">图3 用户请求流程图</p>

### 1.5 数据库设计

![](assets/05b4072dd56ff02bf0ffb379dc8c3418efd3a67da419b7bd5f06cb5c82edda12.jpg)  
<p align="center">图4 数据库设计</p>

ai chatting_history 与 user 是一对多关系（一个用户有多个会话历史）。

class 与 user 是一对多关系（一个教师可以创建多个班级）。

classProblem与class和problem是一对多关系（一个班级可以有多个题目，一个题目可以出现在多个班级中）。

class_score 与 classProblem 和 student_class 是一对多关系（一个班级题目可以有多个学生的得分记录，一个学生在班级中有多个题目的得分记录）。

problem 与 problem_tag 是一对多关系（一个题目可以有多个标签）。

problem_tag 与 tag 是一对多关系（一个标签可以关联多个题目）。

student_class 与 class 和 user 是一对多关系（一个班级可以有多个学生，一个学生可以加入多个班级）。

webauthn_credential 与 user 是一对多关系（一个用户可以有多个 WebAuthn 凭证）。

### 1.6关键技术

平台使用 Spring AI 工程应用框架，兼容所有知名 AI 模型平台接口。

#### 3.3.1 RAG大模型知识库

在班级详情的知识库页面中，每个班级可以拥有一篇PDF格式的知识库文档。用户上传知识库资料后，可以查看、下载或重新上传。当知识库文件上传完成后，系统会将文件按页拆分成多个片段，并通过text-embedding-v3向量大模型将这些片段转换为高维向量，以捕捉文本的语义信息。随后，这些向量化的文档片段会被存储到向量数据库中。

在问答环节中，AI会先将用户的问题输入向量模型进行向量化处理，然后通过向量数据库快速检索相似信息，最后将检索到的信息传递给文本模型，生成答案返回给用户。

##### 涉及技术：

1. PDF文档处理：将知识库文档按页拆分成多个片段；  
2. 向量化处理：使用 text-embedding-v3 向量大模型将文本片段转换为高维向量；  
3. 向量数据库：存储向量化后的文档片段；  
4. AI检索问答：系统会将用户问题向量化，通过向量数据库检索相似信息，再由文本模型生成答案。

#### 3.3.2 AI用户个性化推荐机制

基于Spring AI的Tool实现AI的Function call功能，允许AI大模型与外部工具、API或系统进行交互，触发指定的预定义函数或工具。在本项目中，AI可通过Function call查询学生信息，所在班级，以及题目完成情况以及班级内各种标签的题目，学生通过与AI进行交互获得题目推荐，题目分析等能力。

系统通过采集学生的题目特征信息，如完成情况、知识水平、常见错误习惯等。随后，对学生的答题记录、错误率、完成情况等行为数据进行深入分析，全面刻画其学习状态和薄弱环节。

与此同时，系统对题库中的每道题目进行多维度标签化处理，包括难度等级、所涉及的知识点、题型类别、易错点等。最终，系统通过将学生画像与题目标签进行智能匹配，实现对练习题的精准推荐，帮助学生有针对性地巩固知识、提升能力。

#### 3.3.3 AI会话持久化记忆

项目基于Spring AI框架，通过实现ChatMemory接口并集成Redis存储，构建了高性能的对话上下文持久化方案，实现了AI服务的多轮对话记忆能力，显著提升了交互体验的连贯性和个性化程度。

系统在与用户的多轮对话中，持续记住对话上下文、用户偏好、历史问题和交互信息，从而实现更加自然、连贯、个性化的交互体验。让 AI 不再是“健忘”的机器人，而变成一个“有记性”的学习伙伴。

#### 3.3.3 AI个性化题目生成

在教师题目生成场景中，AI大模型通过精细化的提示设计与结构化输出约束，高效生成高准确性、教育适配性强且难度可控的题目。系统依据教学目标和学生群体的知识水平自动调整题目的类型与难度，确保生成的题目不仅覆盖指定知识点，还符合预定义的标准格式，满足不同学习阶段的需求。

#### 3.3.4Docker 容器化代码运行技术

构建多种运行环境基础镜像基础镜像，支持 Java、Python、 $\mathrm{C}++$  等主流编程语言的编译器和运行时环境；

利用通过运行多个单独镜像环境，实现进程、网络、文件系统的隔离，保证不同用户代码的运行互不干扰，程序对容器运行时间存在限制，超时返回响应并异步销毁容器，确保资源的精准利用；

通过Docker容器化技术，实现了代码运行环境的快速部署和高度隔离，彻底杜绝用户通过给运行代码输入恶意代码破坏平台运行系统的可能；

通过Cgroups技术对容器的CPU、内存、磁盘IO等资源进行精确限制，防止资源滥用；

利用管道技术实现标准输入输出重定向，建立代码运行结果采集和错误处理体系。

#### 3.3.5 WebAuthn 身份认证技术

在本项目中，使用了WebAuthn身份认证技术。它利用公私钥加密，用户登录后可在秘钥注册页面通过设备生成公私钥对，公钥传至服务器存储，私钥留存在用户设备。登录时，服务器发送随机挑战，用户设备用私钥签名后返回，服务器利用公钥验证身份。

该技术优势明显，安全性高，杜绝密码泄露风险，能有效防止网络钓鱼等攻击；便捷性好，用户无需输入密码，通过指纹、面部识别等生物识别或USB密钥等方式，快速完成身份认证；它还支持多设备，如手机、电脑等，用户可依使用习惯选择，提升体验，为用户安全便捷认证方式，契合项目对账号安全便捷登录的需求，且未强制要求传统密码，保有密码登录，满足不同用户需求。

## 第二章 APP 操作说明

### 2.1 软件安装及准备工作

软件需要LinuxJava17运行环境

#### 数据库

运行 sql 文件，将数据导入数据库，并修改软件 application-dev. yml 的数据库配置部分

#### Docker 代码提交与调试运行环境配置

授予软件脚本 build_images.sh 执行权限，开始下载代码运行环境镜像，包括cpp, go, java, selenium, net, nodejs, php, rust, swift 代码的运行环境

开启 docker 远程访问，编辑 docker.server 文件

执行命令 vi /usr/lib/systemd/system/docker.service

找到[Service]节点，修改ExecStart属性，增加-Htcp://0.0.0.0:2375

如

ExecStart=/usr/bin/dockerd-H fd:/// --containerd=/run/containerd/containerd SOCK -H tcp://0.0.0.0:2375，防火墙安全组开放2375端口

修改application-dev.yml文件，修改dockerurl配置项为tcp://您的ip:2375

#### Redis数据库配置

安装Redis，修改application-dev.yml中的redis数据库配置，包括host,port,password

#### 启动项目

后端：运行 ecode.jar, 使用命令 java -jar ecode.jar 启动，默认占用 8080 端口，可在 application-dev.yml 中修改

前端：把前端运行文件放入nginx服务器中，并配置好后端代理，即可运行项目

### 2.2 学生使用流程

#### 1. 注册与登录

使用邮箱注册账号,注册时选择学生角色，可通过WebAuthn身份认证标准进行登录（首次

使用需要通过账号密码登录后注册 webauthn)，无需密码，保障账号安全，也可使用账号密码进行登录操作。

![](assets/ad81594b00478ee41fc174673f49d282f6d6c1fabaac57387e3cf0ec0a6d8988.jpg)  
<p align="center">图5 学生用户登录界面</p>

![](assets/34794de6836d17f71d0a8c4cfe81db92069f6f9ff9c51d6988d3bb65696ff26f.jpg)  
<p align="center">图6 学生用户注册页面</p>

#### 2. 个人信息修改

进入个人信息界面，可对昵称、性别、电话、地址、出生日期、邮箱等信息进行修改，其中，邮箱修改需要进行新邮箱验证，用户名、角色注册时绑定不可修改。

![](assets/abeb9cf4db38b059622d96de8bbd2f6822ab365c34317085084250a9555233d1.jpg)  
<p align="center">图7 个人信息修改</p>

![](assets/6241afcc218a5934cd682b953aa451b4107810b9fa45defb03dad4333c0d3858.jpg)  
<p align="center">图8 邮箱更换</p>

#### 3. 我的班级

学生在此可进入指定班级，要加入新班级时，点击右上角加入班级按钮输入通过老师创建班级后生成的邀请码加入相应的班级。

![](assets/3f36754be6b6dacfd2b5e4c98c2d6b87e9ed4a53dc7016a05311c8580fcf2734.jpg)  
<p align="center">图9 我的班级</p>

学生从我的班级选择班级后即可进入班级详情界面。

(1)班级概览：可在班级概览中快速了解班级整体情况，可查看当前班级人数，题目数量，我的题目完成情况，题目难度和标签分布信息。

![](assets/721ffc83c57483296fc725eb33e5c29f3ea69cea00959beb4f015277ec7af9f1.jpg)  
<p align="center">图10 班级概览</p>

(2)班级成员：可查看当前班内加入的学生用户名、姓名、邮箱信息。

![](assets/0cd9f42c78664c686a0eaebdda019dc75a1a938f43ea0a1c53b22947bad735b9.jpg)  
<p align="center">图11 班级成员</p>

(3) 题目集：在题目集页面查看老师添加至班级内的题目，包括题目名称、难度、标签、提交次数、通过率、完成状态等信息，选择题目开始做题或重做。

![](assets/d266b80346aea9bdec063adf8e8f68259792444d271e61768487b98e8fc1d560.jpg)  
<p align="center">图12 题目集</p>

进入答题页面：点击开始做题或重做按钮后，进入答题界面在答题页面，左侧查看题目名称、内容和难度，可根据需要点击历史图标按钮查看该题目的提交历史，包括提交语言、提交时间、通过测试数及提交历史代码等；右上方可更换编辑器主题、切换代码语言、调整字号等；选中代码右键可使用AI优化代码、修复bug、解释代码等功能；也可点击顶栏对话按钮与AI进行对话获取辅助学习帮助。

![](assets/e08735687098720aacd2491aca97e16e0372d8ecf7f2d06316f81ad9e755a5ae.jpg)  
<p align="center">图13 答题界面</p>

![](assets/83708cdec48d7ac2c914dff0c42c88313979418d13208a83e787ffbf1ace1298.jpg)  
<p align="center">图14 题目提交历史</p>

![](assets/99b6b687703d369684c72d1e5c35410e37b3d8459c45a998fc5fb09497ddc7a5.jpg)  
<p align="center">图15 提交代码详情</p>

![](assets/253266244949517b7407e8be783da5c7db9e97a6c0a434122df7fe39c7bd4823.jpg)  
<p align="center">图16 AI助手</p>

代码运行与调试：在输入值编辑框输入自测值，点击调试按钮，通过Docker容器化技术实现代码运行环境的快速部署和高度隔离，获得该语言代码的运行结果；提交代码后，系统通过查询数据库获取代码输入值并交给Docker容器运行，执行完毕后返回输出值，与数据库输出值进行比对，返回统一差异格式，完成评分。

![](assets/cb51537d883ce20330043a6605897ff6237c2bb2025f0e3eb839ef85b14b37a9.jpg)  
<p align="center">图17 代码运行与调试</p>

(4) 数据统计：可查看当前学生用户在当前班级的学习情况统计，包括得分、提交次数和通过次数。

![](assets/42a6a69c39241e03019e76e6be52315558b54b8145cd6e05ca42f2e5f751b787.jpg)  
<p align="center">图18 我的统计</p>

#### 4.AI助手

在AI会话平台中与AI进行交互，利用基于SpringAI的Tool实现AI的Function call功

能，让 AI 查询学生信息、所在班级、题目完成情况以及班级内各种标签的题目，从而获得题目推荐、题目分析等能力，辅助学习。

![](assets/e014f9398af2886a1ee60506e8531868bd060b70f44716b0ca64055cf7da07b8.jpg)  
<p align="center">图19 AI助手</p>

#### 5. 通行密钥

可在此注册通信密钥，便于登录时直接使用通行密钥一键登录，而不是使用账号密码登录。

![](assets/1a32e998c33afa85c36ebf40971755f86e6efa82737fd9731a0e702a6f113f89.jpg)  
<p align="center">图20 通行密钥</p>

#### 6. 退出登录

点击右上角头像位置，点击退出登录按钮即可退出登录。

![](assets/c6bc797e58d24dd6f7ffe8dec5a7ec386201d45ff08777cf69631a9cf5c4abe7.jpg)  
<p align="center">图21退出登录</p>

### 2.3 教师使用流程

#### 1.注册与登录

注册时角色选择老师，其它与学生端功能一致。

#### 2.个人信息修改

和学生端功能一致。

#### 3.班级管理

此处展示老师添加的班级列表，展示班级的名称、邀请码、加入人数、创建时间信息，也可进行查看班级详情、编辑班级名称和删除班级操作。

![](assets/dc8adec88fb60ec93dc83a9ea5c501df9f26683d3b81f27a5d6f1cd84f1c76ff.jpg)  
<p align="center">图22 班级管理</p>

教师从班级管理点击查看详情即可进入班级详情页面。

(1) 班级概览：和学生端的班级概览一致。  
(2) 班级成员：查看加入班级的所有学生用户信息，包括姓名、邮箱、总得分、完成率，以及每道题目的详细情况（标题、提交次数、通过次数、得分）等，方便对学生的整体学习情况进行掌握。

![](assets/906a44157592250d0371d74cf97b1376b4cb41dc1885ca1d2ed7d02ab3620e6a.jpg)  
<p align="center">图23 学生做题详情</p>

(3) 班级题目：查看所有在班内的题目，包括题目标题、难度、标签、创建时间、更新时间

等信息，支持查看与编辑功能，也可从题库中批量添加题目到现有班级。

![](assets/9da77f1b18e21c74e23dfa356ab6cbcb82548715998e2781b319c934af33be81.jpg)  
<p align="center">图24 班级题目</p>

(4) 排行榜：进行多维度的班级学情分析，包括查看班级题目提交情况表、班级学生成绩排名、班级学生完成不同难度题目分布、班级题目通过率排行榜等信息，全面了解班级学习情况。

![](assets/dfc32d9dd68a2a0213fc3f3a265fa9acecac71faee3c6628c245e914112bf36c.jpg)  
<p align="center">图25 排行榜</p>

![](assets/4f234df27751f8adf9c6de7b6832b235f8466bc6e2b79c97167b1bd8a371dfcb.jpg)  
<p align="center">图26 排行榜2</p>

(5) 知识库：每个班级可以拥有一篇 PDF 格式的知识库文档。用户上传知识库资料后，可以查看、下载或重新上传。当知识库文件上传完成后，系统会将文件按页拆分成多个片段，并通过向量大模型将这些片段转换为高维向量，以捕捉文本的语义信息。随后，这些向量化的文档片段会被存储到向量数据库中。

在问答环节中，AI会先将用户的问题输入向量模型进行向量化处理，然后通过向量数据库快速检索相似信息，最后将检索到的信息传递给文本模型，生成答案返回给用户。

![](assets/cbf7b88f7759d3e83bcf74663dab9541329a6a6332b2cf046995fd3eef1e8b1a.jpg)  
<p align="center">图27 班级知识库</p>

#### 4. 题目管理

查看与搜索题目：可查看、搜索题目，查看题目标题、难度、标签、创建时间等信息，并进行编辑、删除操作。

![](assets/f73c60c8ddd904ae2353ae13ff3971e0994107c21e30f3ec0eadd3a16d52f7f8.jpg)  
<p align="center">图28 题目管理</p>

新增题目：用户可自行添加题目标题、难度、标签、题目描述、解答、测试用例等信息；也可将要求发给 AI，一键生成包括标题、难度、标签、题目描述、解答、测试用例在内的题目内容。

![](assets/f003f37f01946a10b713911097154cbdfe6a59c40def28ddd70ff45f7879bf3d.jpg)  
<p align="center">图29 新增题目</p>

#### 5.AI助手

老师可以询问AI，进行题目咨询，内容优化，提高工作效率。

#### 6. 通行密钥

与学生端一致。

#### 7. 退出登录

与学生端一致。